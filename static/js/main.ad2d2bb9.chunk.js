(this.webpackJsonpelena_fronend=this.webpackJsonpelena_fronend||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(25),s=n.n(o),i=(n(72),n(28)),c=n.n(i),u=n(34),l=n(10),g=n(11),d=n(35),h=n(13),p=n(12),m=(n(74),n(75),n(5)),f=n.n(m),v=n(36),b=n.n(v),S=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,"Elena"))}}]),n}(a.Component),k=n(145),E=n(148),y=n(146),O=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(k.a,{ref:function(t){return e.mapRef=t},center:[37.7749,-122.4194],zoom:13},r.a.createElement(E.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(y.a,{bounds:[[37.781233,-122.454557],[37.760753,-122.428663]],fillOpacity:0,interactive:!1})))}}]),n}(a.Component),C=n(39),M=n.n(C),T=n(40),j=n.n(T),P=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).resetInputField=function(){a.setState({source:"",showSuggestions:!1,suggestions:[],activeSuggestion:0})},a.onChange=function(e){a.findSuggestions(e.currentTarget.value),a.props.setSource(e.currentTarget.value),a.setState({source:e.currentTarget.value,showSuggestions:!0,activeSuggestion:0})},a.onClickOption=function(e){a.props.setSource(e.currentTarget.innerText),a.setState({suggestions:[],showSuggestions:!1,source:e.currentTarget.innerText,activeSuggestion:0})},a.onClickResume=function(e){a.findSuggestions(a.state.source),a.setState({showSuggestions:!0,activeSuggestion:0})},a.onKeyDown=function(e){if(13===e.keyCode)e.preventDefault(),a.props.setSource(a.state.suggestions[a.state.activeSuggestion]),a.setState({showSuggestions:!1,source:a.state.suggestions[a.state.activeSuggestion],activeSuggestion:0,suggestions:[]});else if(38===e.keyCode){if(0===a.state.activeSuggestion)return;a.setState({activeSuggestion:a.state.activeSuggestion-1})}else if(40===e.keyCode){if(a.state.activeSuggestion+1===a.state.suggestions.length)return;a.setState({activeSuggestion:a.state.activeSuggestion+1})}else 27===e.keyCode&&a.setState({activeSuggestion:0,showSuggestions:!1,suggestions:[]})},a.state={source:"",showSuggestions:!1,suggestions:[],activeSuggestion:0,disabled:!1},a}return Object(g.a)(n,[{key:"findSuggestions",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=[],e.next=5,b.a.get("".concat(this.props.domainName,"/autocomplete/").concat(t)).then((function(e){for(var t=e.data,r=0;r<t.length;r++)n.push(t[r]);a.setState({suggestions:n})})).catch((function(e){alert("server is not started or no data!")}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return this.state.showSuggestions&&this.state.source&&this.state.suggestions.length&&(e=r.a.createElement("ul",{className:"suggestions"},this.state.suggestions.map((function(e,n){var a;return n===t.state.activeSuggestion&&(a="suggestion-active"),r.a.createElement("li",{className:a,key:"".concat(e,",").concat(n),onClick:t.onClickOption},e)})))),r.a.createElement(M.a,{className:"form"},r.a.createElement(j.a,{type:"text",name:"source",value:this.state.source,placeholder:this.props.placeholder,onChange:this.onChange,onClick:this.onClickResume,onKeyDown:this.onKeyDown,disabled:this.state.disabled}),e)}}]),n}(a.Component),w=n(19),D=n.n(w),L=n(26),x=n.n(L),F=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState({algorithm:e.target.value}),a.props.setAlgorithm(e.target.value)},a.state={algorithm:"astar"},a}return Object(g.a)(n,[{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement(x.a,{name:"algoOption",value:this.state.algorithm,defaultValue:"astar",className:"algorithm-select",onChange:this.onChange},r.a.createElement(D.a,{value:"astar",label:"AStart"}),r.a.createElement(D.a,{value:"dijkstra",label:"Dijkstra"})))}}]),n}(a.Component),G=n(58),N=n(59),A=n.n(N),I=n(3),B=n(61);function R(){var e=Object(G.a)(["\n                        margin: 0.5%\n                    "]);return R=function(){return e},e}var U=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){e.props.setTrigger()},e}return Object(g.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"search-button-div"},r.a.createElement(A.a,{ref:this.buttonRef,variant:"raised",color:"primary",onClick:this.onClick},"Search"),r.a.createElement(B.BarLoader,{css:Object(I.css)(R()),color:"#36D7B7",loading:this.props.isLoading}))}}]),n}(a.Component),_=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState({elevationGain:e.target.value}),a.props.setElevationGain(e.target.value)},a.state={elevationGain:"none"},a}return Object(g.a)(n,[{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement(x.a,{name:"elevationGainOption",value:this.state.elevationGain,defaultValue:"none",className:"elevationGain-select",onChange:this.onChange},r.a.createElement(D.a,{value:"none",label:"None"}),r.a.createElement(D.a,{value:"max",label:"Max"}),r.a.createElement(D.a,{value:"min",label:"Min"})))}}]),n}(a.Component),K=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.props.setTolerance(e.currentTarget.value),a.setState({tolerance:e.currentTarget.value})},a.state={tolerance:""},a}return Object(g.a)(n,[{key:"componentWillUpdate",value:function(e,t){e.disabled&&""!==this.state.tolerance&&this.setState({tolerance:""})}},{key:"render",value:function(){return r.a.createElement(M.a,{className:"tolerance-form"},r.a.createElement(j.a,{type:"text",name:"tolerance",value:this.state.tolerance,placeholder:"Tolerance",onChange:this.onChange,disabled:this.props.disabled}))}}]),n}(a.Component),Q=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState({number:e.target.value}),a.props.setNumber(e.target.value)},a.state={number:1},a}return Object(g.a)(n,[{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement(x.a,{name:"multiPathOption",value:this.state.number,defaultValue:"1",className:"multiPathOption-select",onChange:this.onChange},r.a.createElement(D.a,{value:1,label:"1"}),r.a.createElement(D.a,{value:2,label:"2"}),r.a.createElement(D.a,{value:3,label:"3"})))}}]),n}(a.Component),V=n(147),W=n(149),z=n(144),J=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState({isOn:!a.state.isOn}),a.props.setSwitchTrigger()},a.state={isOn:!1},a}return Object(g.a)(n,[{key:"render",value:function(){return r.a.createElement(V.a,{component:"fieldset"},r.a.createElement(W.a,{control:r.a.createElement(z.a,{checked:this.state.isOn,onChange:this.onChange,name:"draggableMarker",color:"primary"}),label:"Draggable Marker"}))}}]),n}(a.Component),q="http://elenabackend-env.eba-scmatqp8.us-east-1.elasticbeanstalk.com",$=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).setSource=function(e){return a.setState({source:e})},a.setTarget=function(e){return a.setState({target:e})},a.setAlgorithm=function(e){return a.setState({algorithm:e})},a.setButtonTrigger=function(){return a.setState({buttonTrigger:!a.state.buttonTrigger})},a.setElevationGain=function(e){return a.setState({elevationGain:e})},a.setTolerance=function(e){return a.setState({tolerance:e})},a.setNumber=function(e){return a.setState({number:e})},a.setSwitchTrigger=function(){return a.setState({switchTrigger:!a.state.switchTrigger})},a.onAndOffInputField=function(e){a.sourceInput.setState({disabled:e}),a.targetInput.setState({disabled:e}),e&&(a.sourceInput.resetInputField(),a.targetInput.resetInputField())},a.addDragMarker=function(){var e=[37.773,-122.445],t=[37.772,-122.443];a.setState({sourceCoord:e,targetCoord:t}),a.sourceDragMarker=f.a.marker(e,{draggable:!0}).addTo(a.map.leafletElement).bindPopup("<Strong>Source:</Strong><br><strong>Longitide: </strong>".concat(e[1].toFixed(3),"<br><strong>Latitude: </strong>").concat(e[0].toFixed(3))).on({drag:function(e){var t=e.target.getLatLng();e.target.bindPopup("<Strong>Source:</Strong><br><strong>Longitide: </strong>".concat(t.lng.toFixed(3),"<br><strong>Latitude: </strong>").concat(t.lat.toFixed(3))),a.setState({sourceCoord:[t.lat,t.lng]})},mouseover:function(){return a.sourceDragMarker.openPopup()},mouseout:function(){return a.sourceDragMarker.closePopup()}}),a.targetDragMarker=f.a.marker(t,{draggable:!0}).addTo(a.map.leafletElement).bindPopup("<Strong>Target:</Strong><br><strong>Longitide: </strong>".concat(t[1].toFixed(3),"<br><strong>Latitude: </strong>").concat(t[0].toFixed(3))).on({drag:function(e){var t=e.target.getLatLng();e.target.bindPopup("<Strong>Target:</Strong><br><strong>Longitide: </strong>".concat(t.lng.toFixed(3),"<br><strong>Latitude: </strong>").concat(t.lat.toFixed(3))),a.setState({targetCoord:[t.lat,t.lng]})},mouseover:function(){return a.targetDragMarker.openPopup()},mouseout:function(){return a.targetDragMarker.closePopup()}}),a.map.leafletElement.fitBounds([e,t])},a.removeDragMarker=function(){a.sourceDragMarker.remove(),a.targetDragMarker.remove(),a.sourceDragMarker=null,a.targetDragMarker=null},a.elenaQueryEncode=function(e){return e=(e=(e=e.replace("+","!-")).replace("&","!,")).replace("=","!<")},a.elenaUrlBuilder=function(){if(a.state.switchTrigger){var e=a.state,t=e.sourceCoord,n=e.targetCoord,r=e.algorithm,o=e.elevationGain,s=e.tolerance,i=e.number,c=""!==o?o:"none",u=""===s?100:parseInt(s);return"".concat(q,"/find_path/").concat(r,"?from=").concat(t[1],",").concat(t[0],"&to=").concat(n[1],",").concat(n[0],"&number=").concat(i,"&elemode=").concat(c,"&tolerance=").concat(u)}var l=a.state,g=l.algorithm,d=l.elevationGain,h=l.tolerance,p=l.number,m=a.elenaQueryEncode(a.state.source),f=a.elenaQueryEncode(a.state.target),v=""!==d?d:"none",b=""===h?100:parseInt(h);return"".concat(q,"/find_path/").concat(g,"?fromaddr=").concat(m,"&toaddr=").concat(f,"&number=").concat(p,"&elemode=").concat(v,"&tolerance=").concat(b)},a.changePath=function(e){var t=e.target;t!==a.focusPolyline&&(t.setStyle({color:"#3388ff"}),t.bringToFront(),a.focusPolyline.setStyle({color:"gray"}),a.focusPolyline.bringToBack(),a.focusPolyline=t)},a.findPath=function(){a.state.switchTrigger||""!==a.state.source&&""!==a.state.target?a.draw.bind(Object(d.a)(a))(a.elenaUrlBuilder(),a.drawCallbackFunc):alert("Enter source and target address...")},a.drawCallbackFunc=function(e,t){if(t){a.removeMarkerPolyline();var n=e.data;0===n.legnth&&alert("Paths not found!");for(var r=0;r<n.length;r++){var o=n[r];0===r?function(){a.state.switchTrigger,a.sourceMarker=f.a.circleMarker(o.sourceCoord,{color:"green"}).addTo(a.map.leafletElement).bindPopup("<Strong>Source Point</Strong><br><Strong>Address: </Strong>".concat(o.sourceAddress)).on({mouseover:function(){return a.sourceMarker.openPopup()},mouseout:function(){return a.sourceMarker.closePopup()}}),a.targetMarker=f.a.circleMarker(o.targetCoord,{color:"red"}).addTo(a.map.leafletElement).bindPopup("<Strong>Target Point</Strong><br><Strong>Address: </Strong>".concat(o.targetAddress)).on({mouseover:function(){return a.targetMarker.openPopup()},mouseout:function(){return a.targetMarker.closePopup()}});var e=f.a.polyline(o.positions,{weight:5}).addTo(a.map.leafletElement).bindPopup("<Strong>Distance: </Strong>".concat((.001*o.distance).toFixed(3)," km<br><Strong>Elevation: </Strong>").concat(o.elevationAggregate)).on({click:a.changePath,mouseover:function(){return e.openPopup()},mouseout:function(){return e.closePopup()}});a.focusPolyline=e,a.polylineList.push(e)}():function(){var e=f.a.polyline(o.positions,{weight:5,color:"gray"}).addTo(a.map.leafletElement).bringToBack().bindPopup("<Strong>Distance: </Strong>".concat((.001*o.distance).toFixed(3)," km<br><Strong>Elevation: </Strong>").concat(o.elevationAggregate)).on({click:a.changePath,mouseover:function(){return e.openPopup()},mouseout:function(){return e.closePopup()}});a.polylineList.push(e)}()}a.map.leafletElement.fitBounds(a.polylineList[0].getBounds())}a.setState({findPathLoading:!1})},a.removeMarkerPolyline=function(){if(a.sourceMarker&&(a.sourceMarker.remove(),a.sourceMarker=null),a.targetMarker&&(a.targetMarker.remove(),a.targetMarker=null),0!==a.polylineList.length){for(var e=0;e<a.polylineList.length;e++)a.polylineList[e].remove();a.polylineList=[]}},a.state={source:"",sourceCoord:[],target:"",targetCoord:[],algorithm:"astar",elevationGain:"none",tolerance:"",number:1,buttonTrigger:!1,switchTrigger:!1,findPathLoading:!1},a.polylineList=[],a.sourceMarker=null,a.targetMarker=null,a.focusPolyline=null,a.sourceDragMarker=null,a.targetDragMarker=null,a}return Object(g.a)(n,[{key:"componentDidMount",value:function(){this.map=this.leafletMapRef.mapRef}},{key:"componentDidUpdate",value:function(e,t){"none"!==t.elevationGain&&"none"===this.state.elevationGain&&this.setState({tolerance:""}),this.state.switchTrigger?this.sourceDragMarker&&this.targetDragMarker||(this.onAndOffInputField(!0),this.removeMarkerPolyline(),this.addDragMarker()):this.sourceDragMarker&&this.targetDragMarker&&(this.onAndOffInputField(!1),this.removeDragMarker()),this.state.buttonTrigger&&(this.findPath(),this.setState({buttonTrigger:!1}))}},{key:"draw",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a,r,o=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,r=null,e.next=4,b.a.get(t).then((function(e){o.setState({findPathLoading:!0}),r=e})).catch((function(e){alert("server is not started or no such address!"),a=!1}));case 4:n(r,a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(S,null),r.a.createElement(J,{setSwitchTrigger:this.setSwitchTrigger}),r.a.createElement(O,{ref:function(t){return e.leafletMapRef=t}}),r.a.createElement(P,{ref:function(t){return e.sourceInput=t},placeholder:"Enter start address...",setSource:this.setSource,domainName:q}),r.a.createElement(P,{ref:function(t){return e.targetInput=t},placeholder:"Enter end address...",setSource:this.setTarget,domainName:q}),r.a.createElement(F,{setAlgorithm:this.setAlgorithm}),r.a.createElement(_,{setElevationGain:this.setElevationGain}),r.a.createElement(K,{elevationGain:this.state.elevationGain,setTolerance:this.setTolerance,disabled:"none"===this.state.elevationGain}),r.a.createElement(Q,{setNumber:this.setNumber}),r.a.createElement(U,{state:this.state,setTrigger:this.setButtonTrigger,isLoading:this.state.findPathLoading}))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,t,n){e.exports=n(125)},72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){}},[[67,1,2]]]);
//# sourceMappingURL=main.ad2d2bb9.chunk.js.map